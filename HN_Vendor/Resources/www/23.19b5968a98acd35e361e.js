(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"4IN5":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function e(e){this.renderer=e}return e.prototype.ngOnInit=function(){this.expandedHeight&&this.renderer.setElementStyle(this.wrapper.nativeElement,"height",this.expandedHeight+"px")},e}()},DsRR:function(e,t,n){"use strict";n("ZZ/e");class o{constructor(e,t,n){this.x=e,this.y=t,this.time=n||Date.now()}distanceTo(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}equals(e){return this.x===e.x&&this.y===e.y&&this.time===e.time}velocityFrom(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0}}class i{constructor(e,t,n,o,i,l){this.startPoint=e,this.control2=t,this.control1=n,this.endPoint=o,this.startWidth=i,this.endWidth=l}static fromPoints(e,t){const n=this.calculateControlPoints(e[0],e[1],e[2]).c2,o=this.calculateControlPoints(e[1],e[2],e[3]).c1;return new i(e[1],n,o,e[2],t.start,t.end)}static calculateControlPoints(e,t,n){const i=e.x-t.x,l=e.y-t.y,a=t.x-n.x,r=t.y-n.y,c=(e.x+t.x)/2,s=(e.y+t.y)/2,u=(t.x+n.x)/2,d=(t.y+n.y)/2,h=Math.sqrt(i*i+l*l),m=Math.sqrt(a*a+r*r),p=m/(h+m),_=t.x-(u+(c-u)*p),f=t.y-(d+(s-d)*p);return{c1:new o(c+_,s+f),c2:new o(u+_,d+f)}}length(){let e,t,n=0;for(let o=0;o<=10;o+=1){const i=o/10,l=this.point(i,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),a=this.point(i,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){const o=l-e,i=a-t;n+=Math.sqrt(o*o+i*i)}e=l,t=a}return n}point(e,t,n,o,i){return t*(1-e)*(1-e)*(1-e)+3*n*(1-e)*(1-e)*e+3*o*(1-e)*e*e+i*e*e*e}}class l{constructor(e,t={}){this.canvas=e,this.options=t,this._handleMouseDown=(e=>{1===e.which&&(this._mouseButtonDown=!0,this._strokeBegin(e))}),this._handleMouseMove=(e=>{this._mouseButtonDown&&this._strokeMoveUpdate(e)}),this._handleMouseUp=(e=>{1===e.which&&this._mouseButtonDown&&(this._mouseButtonDown=!1,this._strokeEnd(e))}),this._handleTouchStart=(e=>{e.preventDefault(),1===e.targetTouches.length&&this._strokeBegin(e.changedTouches[0])}),this._handleTouchMove=(e=>{e.preventDefault(),this._strokeMoveUpdate(e.targetTouches[0])}),this._handleTouchEnd=(e=>{e.target===this.canvas&&(e.preventDefault(),this._strokeEnd(e.changedTouches[0]))}),this.velocityFilterWeight=t.velocityFilterWeight||.7,this.minWidth=t.minWidth||.5,this.maxWidth=t.maxWidth||2.5,this.throttle="throttle"in t?t.throttle:16,this.minDistance="minDistance"in t?t.minDistance:5,this._strokeMoveUpdate=this.throttle?function(e,t=250){let n,o,i,l=0,a=null;const r=()=>{l=Date.now(),a=null,n=e.apply(o,i),a||(o=null,i=[])};return function(...c){const s=Date.now(),u=t-(s-l);return o=this,i=c,u<=0||u>t?(a&&(clearTimeout(a),a=null),l=s,n=e.apply(o,i),a||(o=null,i=[])):a||(a=window.setTimeout(r,u)),n}}(l.prototype._strokeUpdate,this.throttle):l.prototype._strokeUpdate,this.dotSize=t.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=t.penColor||"black",this.backgroundColor=t.backgroundColor||"rgba(0,0,0,0)",this.onBegin=t.onBegin,this.onEnd=t.onEnd,this._ctx=e.getContext("2d"),this.clear(),this.on()}clear(){const e=this._ctx,t=this.canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(),this._isEmpty=!0}fromDataURL(e,t={},n){const o=new Image,i=t.ratio||window.devicePixelRatio||1,l=t.width||this.canvas.width/i,a=t.height||this.canvas.height/i;this._reset(),o.onload=(()=>{this._ctx.drawImage(o,0,0,l,a),n&&n()}),o.onerror=(e=>{n&&n(e)}),o.src=e,this._isEmpty=!1}toDataURL(e="image/png",t){switch(e){case"image/svg+xml":return this._toSVG();default:return this.canvas.toDataURL(e,t)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",window.PointerEvent?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.removeEventListener("pointerdown",this._handleMouseDown),this.canvas.removeEventListener("pointermove",this._handleMouseMove),document.removeEventListener("pointerup",this._handleMouseUp),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(e){this.clear(),this._fromData(e,({color:e,curve:t})=>this._drawCurve({color:e,curve:t}),({color:e,point:t})=>this._drawDot({color:e,point:t})),this._data=e}toData(){return this._data}_strokeBegin(e){this._data.push({color:this.penColor,points:[]}),this._reset(),this._strokeUpdate(e),"function"==typeof this.onBegin&&this.onBegin(e)}_strokeUpdate(e){const t=this._createPoint(e.clientX,e.clientY),n=this._data[this._data.length-1],o=n.points,i=o.length>0&&o[o.length-1],l=!!i&&t.distanceTo(i)<=this.minDistance,a=n.color;if(!i||!i||!l){const e=this._addPoint(t);i?e&&this._drawCurve({color:a,curve:e}):this._drawDot({color:a,point:t}),o.push({time:t.time,x:t.x,y:t.y})}}_strokeEnd(e){this._strokeUpdate(e),"function"==typeof this.onEnd&&this.onEnd(e)}_handlePointerEvents(){this._mouseButtonDown=!1,this.canvas.addEventListener("pointerdown",this._handleMouseDown),this.canvas.addEventListener("pointermove",this._handleMouseMove),document.addEventListener("pointerup",this._handleMouseUp)}_handleMouseEvents(){this._mouseButtonDown=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor}_createPoint(e,t){const n=this.canvas.getBoundingClientRect();return new o(e-n.left,t-n.top,(new Date).getTime())}_addPoint(e){const{_lastPoints:t}=this;if(t.push(e),t.length>2){3===t.length&&t.unshift(t[0]);const e=this._calculateCurveWidths(t[1],t[2]),n=i.fromPoints(t,e);return t.shift(),n}return null}_calculateCurveWidths(e,t){const n=this.velocityFilterWeight*t.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(n),i={end:o,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=o,i}_strokeWidth(e){return Math.max(this.maxWidth/(e+1),this.minWidth)}_drawCurveSegment(e,t,n){const o=this._ctx;o.moveTo(e,t),o.arc(e,t,n,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve({color:e,curve:t}){const n=this._ctx,o=t.endWidth-t.startWidth,i=2*Math.floor(t.length());n.beginPath(),n.fillStyle=e;for(let l=0;l<i;l+=1){const e=l/i,n=e*e,a=n*e,r=1-e,c=r*r,s=c*r;let u=s*t.startPoint.x;u+=3*c*e*t.control1.x,u+=3*r*n*t.control2.x;let d=s*t.startPoint.y;d+=3*c*e*t.control1.y,d+=3*r*n*t.control2.y,this._drawCurveSegment(u+=a*t.endPoint.x,d+=a*t.endPoint.y,t.startWidth+a*o)}n.closePath(),n.fill()}_drawDot({color:e,point:t}){const n=this._ctx,o="function"==typeof this.dotSize?this.dotSize():this.dotSize;n.beginPath(),this._drawCurveSegment(t.x,t.y,o),n.closePath(),n.fillStyle=e,n.fill()}_fromData(e,t,n){for(const i of e){const{color:e,points:l}=i;if(l.length>1)for(let n=0;n<l.length;n+=1){const i=l[n],a=new o(i.x,i.y,i.time);this.penColor=e,0===n&&this._reset();const r=this._addPoint(a);r&&t({color:e,curve:r})}else this._reset(),n({color:e,point:l[0]})}}_toSVG(){const e=this._data,t=Math.max(window.devicePixelRatio||1,1),n=this.canvas.width/t,o=this.canvas.height/t,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("width",this.canvas.width.toString()),i.setAttribute("height",this.canvas.height.toString()),this._fromData(e,({color:e,curve:t})=>{const n=document.createElement("path");if(!(isNaN(t.control1.x)||isNaN(t.control1.y)||isNaN(t.control2.x)||isNaN(t.control2.y))){const o=`M ${t.startPoint.x.toFixed(3)},${t.startPoint.y.toFixed(3)} `+`C ${t.control1.x.toFixed(3)},${t.control1.y.toFixed(3)} `+`${t.control2.x.toFixed(3)},${t.control2.y.toFixed(3)} `+`${t.endPoint.x.toFixed(3)},${t.endPoint.y.toFixed(3)}`;n.setAttribute("d",o),n.setAttribute("stroke-width",(2.25*t.endWidth).toFixed(3)),n.setAttribute("stroke",e),n.setAttribute("fill","none"),n.setAttribute("stroke-linecap","round"),i.appendChild(n)}},({color:e,point:t})=>{const n=document.createElement("circle"),o="function"==typeof this.dotSize?this.dotSize():this.dotSize;n.setAttribute("r",o.toString()),n.setAttribute("cx",t.x.toString()),n.setAttribute("cy",t.y.toString()),n.setAttribute("fill",e),i.appendChild(n)});const l='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+` viewBox="0 0 ${n} ${o}"`+` width="${n}"`+` height="${o}"`+">";let a=i.innerHTML;if(void 0===a){const e=document.createElement("dummy"),t=i.childNodes;e.innerHTML="";for(let n=0;n<t.length;n+=1)e.appendChild(t[n].cloneNode(!0));a=e.innerHTML}return"data:image/svg+xml;base64,"+btoa(l+a+"</svg>")}}var a=l;n.d(t,"a",function(){return r});var r=function(){function e(e){this.modalCtrl=e,this.signaturePad=null}return e.prototype.ngOnInit=function(){this.initCanvas(),window.onresize=this.initCanvas},e.prototype.initCanvas=function(){var e=this,t=document.getElementById("canvas"),n=new a(t,{penColor:"red"});this.signaturePad=n;var o=document.body.clientWidth,i=new Image;i.onload=function(){var l=Math.min(o,i.width),a=i.height*(l/i.width);t.width=l,t.height=a,n.fromDataURL(e.imageUrl,{width:l,height:a})},i.src=this.imageUrl},e.prototype.clear=function(){this.signaturePad.clear(),this.initCanvas()},e.prototype.close=function(){this.modalCtrl.dismiss().catch()},e.prototype.done=function(){var e=this.signaturePad.toDataURL("image/jpeg",1);this.signaturePad.clear(),this.modalCtrl.dismiss(e)},e}()},"J+Oa":function(e,t,n){"use strict";var o=n("CcnG");n("4IN5"),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return l});var i=o["\u0275crt"]({encapsulation:0,styles:[[".wrapper[_ngcontent-%COMP%]{transition:.2s linear}.expand-wrapper[_ngcontent-%COMP%]{width:100%}.collapsed[_ngcontent-%COMP%]{height:0!important}"]],data:{}});function l(e){return o["\u0275vid"](0,[o["\u0275qud"](402653184,1,{wrapper:0}),(e()(),o["\u0275eld"](1,0,[[1,0],["wrapper",1]],null,1,"div",[["class","expand-wrapper"]],[[2,"collapsed",null]],null,null,null,null)),o["\u0275ncd"](null,0)],null,function(e,t){e(t,1,0,!t.component.expanded)})}},"Ja+p":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n("ZZ/e"),i=n("CcnG"),l=function(){function e(e){this.navCtrl=e}return e.prototype.push=function(e,t){void 0===t&&(t={}),this.data=t,this.navCtrl.navigateForward("/"+(e||""))},e.prototype.pop=function(e){this.navCtrl.navigateBack("/"+(e||""))},e.prototype.get=function(e){return this.data[e]},e.ngInjectableDef=i.defineInjectable({factory:function(){return new e(i.inject(o.NavController))},token:e,providedIn:"root"}),e}()},NAMV:function(e,t,n){"use strict";var o=n("CcnG"),i=n("oBZk"),l=n("ZZ/e"),a=n("DsRR");n.d(t,"a",function(){return u});var r=o["\u0275crt"]({encapsulation:0,styles:[[".canvas-wrap[_ngcontent-%COMP%]{width:100%;height:100%;background:#000;display:flex;align-items:center;text-align:center}.canvas-wrap[_ngcontent-%COMP%]   .img-canvas[_ngcontent-%COMP%]{margin:0 auto}"]],data:{}});function c(e){return o["\u0275vid"](0,[(e()(),o["\u0275eld"](0,0,null,null,20,"ion-header",[["no-border",""]],null,null,null,i.T,i.n)),o["\u0275did"](1,49152,null,0,l.IonHeader,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),(e()(),o["\u0275eld"](2,0,null,0,18,"ion-toolbar",[["color","primary"]],null,null,null,i.kb,i.E)),o["\u0275did"](3,49152,null,0,l.IonToolbar,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],{color:[0,"color"]},null),(e()(),o["\u0275eld"](4,0,null,0,5,"ion-buttons",[["slot","start"]],null,null,null,i.J,i.d)),o["\u0275did"](5,49152,null,0,l.IonButtons,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),(e()(),o["\u0275eld"](6,0,null,0,3,"ion-button",[],null,[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==e.component.close()&&o),o},i.I,i.c)),o["\u0275did"](7,49152,null,0,l.IonButton,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),(e()(),o["\u0275eld"](8,0,null,0,1,"ion-icon",[["name","close"],["slot","icon-only"]],null,null,null,i.U,i.o)),o["\u0275did"](9,49152,null,0,l.IonIcon,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],{name:[0,"name"]},null),(e()(),o["\u0275eld"](10,0,null,0,2,"ion-title",[],null,null,null,i.jb,i.D)),o["\u0275did"](11,49152,null,0,l.IonTitle,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),(e()(),o["\u0275ted"](-1,0,["\u6807\u8bb0\u4f4d\u7f6e"])),(e()(),o["\u0275eld"](13,0,null,0,7,"ion-buttons",[["slot","end"]],null,null,null,i.J,i.d)),o["\u0275did"](14,49152,null,0,l.IonButtons,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),(e()(),o["\u0275eld"](15,0,null,0,2,"ion-button",[],null,[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==e.component.clear()&&o),o},i.I,i.c)),o["\u0275did"](16,49152,null,0,l.IonButton,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),(e()(),o["\u0275ted"](-1,0,[" \u6e05\u9664 "])),(e()(),o["\u0275eld"](18,0,null,0,2,"ion-button",[],null,[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==e.component.done()&&o),o},i.I,i.c)),o["\u0275did"](19,49152,null,0,l.IonButton,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),(e()(),o["\u0275ted"](-1,0,[" \u786e\u5b9a "])),(e()(),o["\u0275eld"](21,0,null,null,4,"ion-content",[],null,null,null,i.P,i.j)),o["\u0275did"](22,49152,null,0,l.IonContent,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),(e()(),o["\u0275eld"](23,0,null,0,2,"div",[["class","canvas-wrap"],["id","canvas-wrap"]],null,null,null,null,null)),(e()(),o["\u0275eld"](24,0,null,null,1,"canvas",[["class","img-canvas"],["id","canvas"]],null,null,null,null,null)),(e()(),o["\u0275ted"](-1,null,[" \u60a8\u7684\u7834\u6d4f\u89c8\u5668\u4e0d\u517c\u5bb9\uff0c\u8bf7\u5347\u7ea7\uff01 "]))],function(e,t){e(t,3,0,"primary"),e(t,9,0,"close")},null)}function s(e){return o["\u0275vid"](0,[(e()(),o["\u0275eld"](0,0,null,null,1,"app-image-edit",[],null,null,null,c,r)),o["\u0275did"](1,114688,null,0,a.a,[l.ModalController],null,null)],function(e,t){e(t,1,0)},null)}var u=o["\u0275ccf"]("app-image-edit",a.a,s,{imageUrl:"imageUrl"},{},[])},TM8j:function(e,t,n){"use strict";n.r(t);var o=n("CcnG"),i=n("ajt+"),l=n("Ja+p"),a=n("6mc2"),r=n("ZZ/e"),c=function(){function e(e,t,n,o){this.db=e,this.events=t,this.tools=n,this.nav=o,this.breadcrumbs=[],this.isCategory=!0,this.currTypes=[],this.currTypeData={},this.currRes=[]}return e.prototype.ngOnInit=function(){this.loadData()},e.prototype.loadData=function(e){var t=this;void 0===e&&(e="0M"),this.tools.showLoading();var n=this.nav.data||{};this.db.initDB().then(function(){t.db.getSingleCondData("check_type_list","parIdCheckType",[e,n.checkup_id||"70"],function(e){console.log(e),t.tools.hideLoading(),e.length>0?(t.currRes=e,t.isCategory=!0):(t.isCategory=!0,t.currRes=e)})})},e.prototype.typeItems=function(e){return this.currTypeData[e.qatype_name+"|"+e.qatype_id]||[]},e.prototype.selectMenu=function(e){if(e!==this.breadcrumbs.length-1){for(var t=[],n=0;n<=e;n++)t.push(this.breadcrumbs[n]);this.breadcrumbs=t,this.loadData(this.breadcrumbs[e].tree_mid)}},e.prototype.selectItem=function(e,t){if(void 0===t&&(t=null),t&&t.stopPropagation(),"0"===e.is_item)0===this.breadcrumbs.length&&this.breadcrumbs.push({name:"\u9876\u7ea7\u5206\u7c7b",tree_mid:"0M"}),this.breadcrumbs.push({name:e.tree_name,tree_mid:e.tree_mid}),this.loadData(e.tree_mid);else{var n=Object.assign({},e);n.roomItem=this.nav.data,this.events.publish("qa.selected",n),this.nav.pop("add-que")}},e}(),s=function(){return function(){}}(),u=n("pMnS"),d=n("NAMV"),h=n("Ip0R"),m=n("oBZk"),p=n("J+Oa"),_=n("4IN5"),f=o["\u0275crt"]({encapsulation:0,styles:[[".breadcrumb[_ngcontent-%COMP%]{padding:0 5px;border-bottom:.55px solid #f2f2f2;overflow-x:auto;white-space:nowrap;background:#fff;width:100%;-ms-overflow-style:none}.breadcrumb[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;width:0!important}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]{display:inline-block;height:44px;line-height:44px;font-size:14px;color:#333;padding:0 5px;text-align:center}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item.current[_ngcontent-%COMP%]{color:#999}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]   .splitor[_ngcontent-%COMP%]{font-size:12px;color:#999;padding-left:10px}ion-card[_ngcontent-%COMP%]{box-shadow:none;margin:0;border-bottom:.55px solid #f2f2f2;border-radius:0}.name[_ngcontent-%COMP%]{font-size:14px;color:#333}.rule[_ngcontent-%COMP%]{font-size:12px;color:#999}"]],data:{}});function g(e){return o["\u0275vid"](0,[(e()(),o["\u0275eld"](0,0,null,null,1,"span",[["class","splitor"]],null,null,null,null,null)),(e()(),o["\u0275ted"](-1,null,["/"]))],null,null)}function b(e){return o["\u0275vid"](0,[(e()(),o["\u0275eld"](0,0,null,null,3,"span",[["class","breadcrumb-item"],["tappable",""]],[[2,"current",null]],[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==e.component.selectMenu(e.context.index)&&o),o},null,null)),(e()(),o["\u0275ted"](1,null,[" ",""])),(e()(),o["\u0275and"](16777216,null,null,1,null,g)),o["\u0275did"](3,16384,null,0,h.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,3,0,t.context.index!==t.component.breadcrumbs.length-1)},function(e,t){e(t,0,0,t.context.index===t.component.breadcrumbs.length-1),e(t,1,0,t.context.$implicit.name)})}function v(e){return o["\u0275vid"](0,[(e()(),o["\u0275eld"](0,0,null,null,7,"ion-item",[["tappable",""]],null,[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==e.component.selectItem(e.context.$implicit)&&o),o},m.Y,m.s)),o["\u0275did"](1,49152,null,0,r.IonItem,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),(e()(),o["\u0275eld"](2,0,null,0,3,"ion-label",[],null,null,null,m.Z,m.t)),o["\u0275did"](3,49152,null,0,r.IonLabel,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),(e()(),o["\u0275eld"](4,0,null,0,1,"h2",[["style","font-size: 14px;color: #333;font-size: 14px;"]],null,null,null,null,null)),(e()(),o["\u0275ted"](5,null,["",""])),(e()(),o["\u0275eld"](6,0,null,0,1,"ion-icon",[["name","arrow-forward"],["slot","end"],["style","font-size: 14px; color: #999;"]],null,null,null,m.U,m.o)),o["\u0275did"](7,49152,null,0,r.IonIcon,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],{name:[0,"name"]},null)],function(e,t){e(t,7,0,"arrow-forward")},function(e,t){e(t,5,0,t.context.$implicit.tree_name)})}function y(e){return o["\u0275vid"](0,[(e()(),o["\u0275eld"](0,0,null,null,3,"ion-list",[],null,null,null,m.ab,m.u)),o["\u0275did"](1,49152,null,0,r.IonList,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),(e()(),o["\u0275and"](16777216,null,0,1,null,v)),o["\u0275did"](3,278528,null,0,h.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,t){e(t,3,0,t.component.currRes)},null)}function I(e){return o["\u0275vid"](0,[(e()(),o["\u0275eld"](0,0,null,null,2,"ion-card-header",[["class","qa-type-name"],["text-wrap",""]],null,null,null,m.K,m.f)),o["\u0275did"](1,49152,null,0,r.IonCardHeader,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),(e()(),o["\u0275ted"](2,0,[" "," "]))],null,function(e,t){e(t,2,0,t.parent.context.$implicit.qatype_name)})}function x(e){return o["\u0275vid"](0,[(e()(),o["\u0275eld"](0,0,null,null,7,"ion-item",[["tappable",""]],null,[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=!1!==e.component.selectItem(e.context.$implicit,n)&&o),o},m.Y,m.s)),o["\u0275did"](1,49152,null,0,r.IonItem,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),(e()(),o["\u0275eld"](2,0,null,0,5,"ion-label",[],null,null,null,m.Z,m.t)),o["\u0275did"](3,49152,null,0,r.IonLabel,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),(e()(),o["\u0275eld"](4,0,null,0,1,"h2",[["class","name"],["text-wrap",""]],null,null,null,null,null)),(e()(),o["\u0275ted"](5,null,["",""])),(e()(),o["\u0275eld"](6,0,null,0,1,"p",[["class","rule"],["text-wrap",""]],null,null,null,null,null)),(e()(),o["\u0275ted"](7,null,[" "," "]))],null,function(e,t){e(t,5,0,t.context.$implicit.qaitem_name),e(t,7,0,t.context.$implicit.stand_name)})}function w(e){return o["\u0275vid"](0,[(e()(),o["\u0275eld"](0,0,null,null,3,"app-accordion-list",[["style","display: block; width: 100%;"]],null,null,null,p.b,p.a)),o["\u0275did"](1,114688,null,0,_.a,[o.Renderer],{expanded:[0,"expanded"],expandedHeight:[1,"expandedHeight"]},null),(e()(),o["\u0275and"](16777216,null,0,1,null,x)),o["\u0275did"](3,278528,null,0,h.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,t){var n=t.component;e(t,1,0,t.parent.context.$implicit.expanded,0),e(t,3,0,n.typeItems(t.parent.context.$implicit))},null)}function k(e){return o["\u0275vid"](0,[(e()(),o["\u0275eld"](0,0,null,null,5,"ion-card",[["tappable",""]],null,[[null,"click"]],function(e,t,n){var o=!0;return"click"===t&&(o=0!=(e.context.$implicit.expanded=!e.context.$implicit.expanded)&&o),o},m.N,m.e)),o["\u0275did"](1,49152,null,0,r.IonCard,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),(e()(),o["\u0275and"](16777216,null,0,1,null,I)),o["\u0275did"](3,16384,null,0,h.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),o["\u0275and"](16777216,null,0,1,null,w)),o["\u0275did"](5,16384,null,0,h.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,3,0,n.typeItems(t.context.$implicit).length>0),e(t,5,0,n.typeItems(t.context.$implicit).length>0)},null)}function C(e){return o["\u0275vid"](0,[(e()(),o["\u0275eld"](0,0,null,null,3,"ion-list",[],null,null,null,m.ab,m.u)),o["\u0275did"](1,49152,null,0,r.IonList,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),(e()(),o["\u0275and"](16777216,null,0,1,null,k)),o["\u0275did"](3,278528,null,0,h.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,t){e(t,3,0,t.component.currTypes)},null)}function q(e){return o["\u0275vid"](0,[(e()(),o["\u0275eld"](0,0,null,null,14,"ion-header",[["no-border",""]],null,null,null,m.T,m.n)),o["\u0275did"](1,49152,null,0,r.IonHeader,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),(e()(),o["\u0275eld"](2,0,null,0,9,"ion-toolbar",[["color","primary"]],null,null,null,m.kb,m.E)),o["\u0275did"](3,49152,null,0,r.IonToolbar,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],{color:[0,"color"]},null),(e()(),o["\u0275eld"](4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,m.J,m.d)),o["\u0275did"](5,49152,null,0,r.IonButtons,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),(e()(),o["\u0275eld"](6,0,null,0,2,"ion-back-button",[["default-href","check-place-home"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==o["\u0275nov"](e,8).onClick(n)&&i),i},m.H,m.b)),o["\u0275did"](7,49152,null,0,r.IonBackButton,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),o["\u0275did"](8,16384,null,0,r.IonBackButtonDelegate,[[2,r.IonRouterOutlet],r.NavController],null,null),(e()(),o["\u0275eld"](9,0,null,0,2,"ion-title",[],null,null,null,m.jb,m.D)),o["\u0275did"](10,49152,null,0,r.IonTitle,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),(e()(),o["\u0275ted"](-1,0,["\u95ee\u9898\u9009\u9879"])),(e()(),o["\u0275eld"](12,0,null,0,2,"div",[["class","breadcrumb"]],null,null,null,null,null)),(e()(),o["\u0275and"](16777216,null,null,1,null,b)),o["\u0275did"](14,278528,null,0,h.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),o["\u0275eld"](15,0,null,null,5,"ion-content",[],null,null,null,m.P,m.j)),o["\u0275did"](16,49152,null,0,r.IonContent,[o.ChangeDetectorRef,o.ElementRef,o.NgZone],null,null),(e()(),o["\u0275and"](16777216,null,0,1,null,y)),o["\u0275did"](18,16384,null,0,h.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),o["\u0275and"](16777216,null,0,1,null,C)),o["\u0275did"](20,16384,null,0,h.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,3,0,"primary"),e(t,14,0,n.breadcrumbs),e(t,18,0,n.isCategory),e(t,20,0,!n.isCategory)},null)}function D(e){return o["\u0275vid"](0,[(e()(),o["\u0275eld"](0,0,null,null,1,"app-qa-item-list2",[],null,null,null,q,f)),o["\u0275did"](1,114688,null,0,c,[i.a,r.Events,a.a,l.a],null,null)],function(e,t){e(t,1,0)},null)}var S=o["\u0275ccf"]("app-qa-item-list2",c,D,{},{},[]),P=n("gIcY"),j=n("ZYCi"),R=n("l4Sw"),N=n("j1ZV");n.d(t,"QaItemList2PageModuleNgFactory",function(){return E});var E=o["\u0275cmf"](s,[],function(e){return o["\u0275mod"]([o["\u0275mpd"](512,o.ComponentFactoryResolver,o["\u0275CodegenComponentFactoryResolver"],[[8,[u.a,d.a,S]],[3,o.ComponentFactoryResolver],o.NgModuleRef]),o["\u0275mpd"](4608,h.NgLocalization,h.NgLocaleLocalization,[o.LOCALE_ID,[2,h["\u0275angular_packages_common_common_a"]]]),o["\u0275mpd"](4608,P["\u0275angular_packages_forms_forms_j"],P["\u0275angular_packages_forms_forms_j"],[]),o["\u0275mpd"](4608,r.AngularDelegate,r.AngularDelegate,[o.NgZone,o.ApplicationRef]),o["\u0275mpd"](4608,r.ModalController,r.ModalController,[r.AngularDelegate,o.ComponentFactoryResolver,o.Injector]),o["\u0275mpd"](4608,r.PopoverController,r.PopoverController,[r.AngularDelegate,o.ComponentFactoryResolver,o.Injector]),o["\u0275mpd"](1073742336,h.CommonModule,h.CommonModule,[]),o["\u0275mpd"](1073742336,P["\u0275angular_packages_forms_forms_bc"],P["\u0275angular_packages_forms_forms_bc"],[]),o["\u0275mpd"](1073742336,P.FormsModule,P.FormsModule,[]),o["\u0275mpd"](1073742336,r.IonicModule,r.IonicModule,[]),o["\u0275mpd"](1073742336,j.n,j.n,[[2,j.t],[2,j.m]]),o["\u0275mpd"](1073742336,R.a,R.a,[]),o["\u0275mpd"](1073742336,N.a,N.a,[]),o["\u0275mpd"](1073742336,s,s,[]),o["\u0275mpd"](1024,j.k,function(){return[[{path:"",component:c}]]},[])])})},"ajt+":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n("sJLo"),i=n("CcnG"),l=function(){function e(){this.hasCreatedDB=!1}return e.prototype.getDBName=function(){var e=localStorage.getItem("db.name");return e||(e="qms_"+ +new Date,localStorage.setItem("db.name",e)),e},e.prototype.createDB=function(){var e=this;return new Promise(function(t,n){if(e.db)t(e.db);else{var o=window.indexedDB;if(o){console.log("open db");var i=o.open(e.getDBName(),4);i.onerror=function(e){console.log(e),n(e.target.error.message)},i.onsuccess=function(n){e.db=i.result,e.clearTable("check_itemlist"),t(e.db)},i.onupgradeneeded=function(t){if(console.log(2121),e.db=i.result,e.db.objectStoreNames.contains("add_que")||(n=e.db.createObjectStore("add_que",{keyPath:"addque_id",autoIncrement:!0})).createIndex("check_limit",["check_type","rect_limit"],{unique:!1}),e.db.objectStoreNames.contains("que_list")||((n=e.db.createObjectStore("que_list",{keyPath:"que_id",autoIncrement:!0})).createIndex("istate","istate",{unique:!1}),n.createIndex("checkup_id","checkup_id",{unique:!1}),n.createIndex("level_id","level_id",{unique:!1}),n.createIndex("time","reg_date",{unique:!1})),e.db.objectStoreNames.contains("que_list_annexs")||((n=e.db.createObjectStore("que_list_annexs",{keyPath:"que_annex_id",autoIncrement:!0})).createIndex("IdAndType",["problem_id","annex_type"],{unique:!1}),n.createIndex("TableAndType",["table_id","annex_type"],{unique:!1}),n.createIndex("ID","annex_id",{unique:!1})),e.db.objectStoreNames.contains("que_list_record")||(n=e.db.createObjectStore("que_list_record",{keyPath:"que_record_id",autoIncrement:!0})).createIndex("problemId","problem_id",{unique:!1}),!e.db.objectStoreNames.contains("que_list_contracttype"))var n=e.db.createObjectStore("que_list_contracttype",{keyPath:"que_contracttype_id",autoIncrement:!0});e.db.objectStoreNames.contains("que_level_list")||(n=e.db.createObjectStore("que_level_list",{keyPath:"que_level_id",autoIncrement:!0})),e.db.objectStoreNames.contains("task_list_1")||((n=e.db.createObjectStore("task_list_1",{keyPath:"task_1_id",autoIncrement:!0})).createIndex("isUpdate","isupdate",{unique:!1}),n.createIndex("iscomplete","iscomplete",{unique:!1}),n.createIndex("type_complete",["checkup_id","iscomplete"],{unique:!1})),e.db.objectStoreNames.contains("task_list_2")||((n=e.db.createObjectStore("task_list_2",{keyPath:"task_2_id",autoIncrement:!0})).createIndex("planMid","plan_mid",{unique:!1}),n.createIndex("isUpdate","isupdate",{unique:!1}),n.createIndex("type_isfq",["object_type","is_fq","plan_mid"],{unique:!1}),n.createIndex("parid_isfq",["tree_parid","is_fq","plan_mid"],{unique:!1})),e.db.objectStoreNames.contains("task_list_3")||((n=e.db.createObjectStore("task_list_3",{keyPath:"task_3_id",autoIncrement:!0})).createIndex("planDid","plan_did",{unique:!1}),n.createIndex("positionName","position_name",{unique:!1}),n.createIndex("isUpdate","isupdate",{unique:!1})),e.db.objectStoreNames.contains("project_tree")||((n=e.db.createObjectStore("project_tree",{keyPath:"tree_id",autoIncrement:!0})).createIndex("type_isfq",["object_type","is_fq"],{unique:!1}),n.createIndex("parid_isfq",["tree_parid","is_fq"],{unique:!1})),e.db.objectStoreNames.contains("list_inhouse")||(n=e.db.createObjectStore("list_inhouse",{keyPath:"listinhouse_id",autoIncrement:!0})).createIndex("objtypename","objecttype_name",{unique:!1}),e.db.objectStoreNames.contains("check_itemlist")||(n=e.db.createObjectStore("check_itemlist",{keyPath:"item_id",autoIncrement:!0})).createIndex("checkup_position",["checkup_id","pro_position_id"],{unique:!1}),e.db.objectStoreNames.contains("check_itemlist_new")||(n=e.db.createObjectStore("check_itemlist_new",{keyPath:"item_new_id",autoIncrement:!0})).createIndex("checkup_position_type",["checkup_id","position_id","template_type"],{unique:!1}),e.db.objectStoreNames.contains("check_typelist")||e.db.createObjectStore("check_typelist",{keyPath:"dic_id",autoIncrement:!1}),e.db.objectStoreNames.contains("que_type_item")||(n=e.db.createObjectStore("que_type_item",{keyPath:"que_type_item_id",autoIncrement:!0})).createIndex("position_id",["position_id"],{unique:!1}),e.db.objectStoreNames.contains("que_type_item")||(n=e.db.createObjectStore("que_type_item",{keyPath:"que_type_item_id",autoIncrement:!0})).createIndex("position_id",["position_id"],{unique:!1}),e.db.objectStoreNames.contains("account_list")||((n=e.db.createObjectStore("account_list",{keyPath:"account_id",autoIncrement:!0})).createIndex("accountType","accounttype",{unique:!1}),n.createIndex("companyName","companyname",{unique:!1}),n.createIndex("contractTypeId","contracttypeid",{unique:!1}),n.createIndex("contractId","contractid",{unique:!1})),e.db.objectStoreNames.contains("account_list_2")||((n=e.db.createObjectStore("account_list_2",{keyPath:"account_id",autoIncrement:!0})).createIndex("accountType","accounttype",{unique:!1}),n.createIndex("companyName","companyname",{unique:!1}),n.createIndex("contractTypeId","contracttypeid",{unique:!1}),n.createIndex("contractId","contractid",{unique:!1})),e.db.objectStoreNames.contains("accounttype_list")||(n=e.db.createObjectStore("accounttype_list",{keyPath:"accounttype_id",autoIncrement:!0})),e.db.objectStoreNames.contains("accounttype_list_2")||(n=e.db.createObjectStore("accounttype_list_2",{keyPath:"accounttype_id",autoIncrement:!0})),e.db.objectStoreNames.contains("que_reason_list")||(n=e.db.createObjectStore("que_reason_list",{keyPath:"que_reason_id",autoIncrement:!0})),e.db.objectStoreNames.contains("que_overdue_reason_list")||(n=e.db.createObjectStore("que_overdue_reason_list",{keyPath:"que_overdue_reason_id",autoIncrement:!0})),e.db.objectStoreNames.contains("rect_register_list")||(n=e.db.createObjectStore("rect_register_list",{keyPath:"rect_register_id",autoIncrement:!0})),e.db.objectStoreNames.contains("rect_feedback_list")||(n=e.db.createObjectStore("rect_feedback_list",{keyPath:"rect_feedback_id",autoIncrement:!0})),e.db.objectStoreNames.contains("rect_urge_list")||(n=e.db.createObjectStore("rect_urge_list",{keyPath:"rect_urge_id",autoIncrement:!0})),e.db.objectStoreNames.contains("rect_accept_list")||(n=e.db.createObjectStore("rect_accept_list",{keyPath:"rect_accept_id",autoIncrement:!0})),e.db.objectStoreNames.contains("check_type_list")||(n=e.db.createObjectStore("check_type_list",{keyPath:"check_type_id",autoIncrement:!0})).createIndex("parIdCheckType",["tree_parid","checkup_id"],{unique:!1}),e.db.objectStoreNames.contains("search_que_man_list")||(n=e.db.createObjectStore("search_que_man_list",{keyPath:"search_que_man_id",autoIncrement:!0})).createIndex("manname","manname",{unique:!1}),e.db.objectStoreNames.contains("search_que_con_list")||(n=e.db.createObjectStore("search_que_con_list",{keyPath:"search_que_con_id",autoIncrement:!0})).createIndex("conname","conname",{unique:!1}),e.db.objectStoreNames.contains("search_que_building_list")||(n=e.db.createObjectStore("search_que_building_list",{keyPath:"search_que_building_name",autoIncrement:!0})).createIndex("roomname","roomname",{unique:!1}),console.log(555)}}else n("\u6682\u4e0d\u652f\u6301\u6570\u636e\u7f13\u5b58")}})},e.prototype.initDB=function(){return this.createDB()},e.prototype.closeDB=function(){console.log("\u5173\u95ed\u6570\u636e\u5e93\uff1a"+this.db),this.db&&this.db.close()},e.prototype.deleteDB=function(){console.log("\u5220\u9664\u6570\u636e\u5e93\uff1a",this.db),window.indexedDB.deleteDatabase(this.getDBName()),localStorage.removeItem("db.name"),this.db=null},e.prototype.clearTable=function(e){console.log("\u6e05\u9664\u8868\uff1a"+e),this.db.transaction([e],"readwrite").objectStore(e).clear()},e.prototype.insert=function(e,t,n,i){void 0===i&&(i=!1);var l=this.db.transaction([e],"readwrite").objectStore(e);i&&l.clear(),console.log("\u63d2\u5165\u6570\u636e\uff1a"+e);var a=[],r=[],c=[],s=0;if(t.forEach(function(o){if("que_list"===e){var i=Object.assign({},o);a.push({conid:i.contracttypeid,conname:i.contracttypename}),r.push({manid:i.reg_manid,manname:i.reg_manname}),c.push({roomname:i.roomname})}var u=l.add(o);u.onsuccess=function(e){++s===t.length&&n&&n()},u.onerror=function(e){++s===t.length&&n&&n()}}),"que_list"===e){console.log(a),console.log(r),console.log(c);var u=this.db.transaction("search_que_con_list","readwrite").objectStore("search_que_con_list");u.clear();var d=this.db.transaction("search_que_man_list","readwrite").objectStore("search_que_man_list");d.clear();var h=this.db.transaction("search_que_building_list","readwrite").objectStore("search_que_building_list");h.clear(),a.sort(function(e,t){return e.conname>t.conname?1:-1}),r.sort(function(e,t){return e.manname>t.manname?1:-1}),c.sort(function(e,t){return e.roomname>t.roomname?1:-1}),o.a.unique_conid(a).forEach(function(e){u.add(e)}),o.a.unique_manid(r).forEach(function(e){d.add(e)}),o.a.unique_roomname(c).forEach(function(e){h.add(e)})}},e.prototype.delete=function(e,t,n){void 0===t&&(t=[]);var o=this.db.transaction([e],"readwrite").objectStore(e),i=[],l=[];t.forEach(function(e){var t=o.delete(e),n=new Promise(function(n,o){t.onsuccess=function(t){l.push(e)},t.onerror=function(e){}});i.push(n)}),Promise.all(i).then(function(){n&&n(l)})},e.prototype.update=function(e,t,n){void 0===t&&(t=[]);var o=this.db.transaction([e],"readwrite").objectStore(e),i=0;t.forEach(function(e){var l=o.put(e);l.onsuccess=function(e){++i===t.length&&n&&n()},l.onerror=function(e){}})},e.prototype.select=function(e,t,n,o){void 0===t&&(t=[]),void 0===n&&(n={}),void 0===o&&(o=null),console.log(e);var i=this.db.transaction([e],"readwrite").objectStore(e);if(0===t.length){var l=[];i.openCursor().onsuccess=function(e){var t=e.target.result;t?(l.push(t.value),t.continue()):o&&o(l)}}},e.prototype.getBuildings=function(e,t,n,o,i,l){void 0===t&&(t=null),void 0===n&&(n=0);var a="0"===i?"project_tree":"task_list_2";"1"==e?this.getSingleCondData(a,"type_isfq",0==n?"0"===i?["\u697c\u680b","0"]:["\u697c\u680b","0",l]:"0"===i?["\u5206\u533a","1"]:["\u5206\u533a","1",l],o):this.getSingleCondData(a,"parid_isfq","0"===i?[t,n.toString()]:[t,n.toString(),l],o)},e.prototype.getListInhouse=function(e,t){this.getSingleCondData("task_list_3","planDid",e,t)},e.prototype.getPartialsInHouse=function(e,t,n){this.getSingleCondData("check_itemlist","checkup_position",[e,t],n)},e.prototype.getPartialsInHouse2=function(e,t,n,o){this.getSingleCondData("check_itemlist_new","checkup_position_type",[t,n,e],o)},e.prototype.getSingleCondData=function(e,t,n,o){console.info(e,"-",t,"-",n);var i=this.db.transaction([e],"readwrite").objectStore(e).index(t),l=IDBKeyRange.only(n),a=i.openCursor(l);a.onerror=function(e){console.log(e.target.error.message),o&&o(null)};var r=[];a.onsuccess=function(e){var t=e.target.result;t?(r.push(t.value),t.continue()):o&&o(r)}},e.prototype.disposeDB=function(){var e=this;return new Promise(function(t){e.db.close(),window.indexedDB.deleteDatabase(e.getDBName()),t()})},e.ngInjectableDef=i.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}()},j1ZV:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){return function(){}}()},l4Sw:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){return function(){}}()}}]);